<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <title>Okul GÃ¼reÅŸ MÃ¼sabakasÄ±</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Firebase CDN -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getFirestore, collection, addDoc, onSnapshot, deleteDoc, doc, updateDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

    // ðŸ”¥ FIREBASE CONFIG (BURAYI KENDÄ° PROJENDEN AL)
    const firebaseConfig = {
  apiKey: "AIzaSyAf116Bb_Rv-rXI8C47EeaIlwxJQbPk7ic",
  authDomain: "szbalfightclub-3a1ae.firebaseapp.com",
  projectId: "szbalfightclub-3a1ae",
  storageBucket: "szbalfightclub-3a1ae.firebasestorage.app",
  messagingSenderId: "303031679666",
  appId: "1:303031679666:web:142d4e8b5c4201353a67ab"
};

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    let isAdmin = false;

    // SAYFA GEÃ‡Ä°ÅžÄ°
    window.showPage = function(page) {
      document.getElementById('musabaka').style.display = page === 'musabaka' ? 'block' : 'none';
      document.getElementById('puan').style.display = page === 'puan' ? 'block' : 'none';
      document.getElementById('admin').style.display = page === 'admin' ? 'block' : 'none';
    }

    // ADMÄ°N GÄ°RÄ°Åž
    window.login = function() {
      const pass = document.getElementById('pass').value;
      if (pass === 'ben1sma1ly1ld1r1m') {
        isAdmin = true;
        document.getElementById('loginBox').style.display = 'none';
        document.getElementById('panel').style.display = 'block';
      } else alert('Åžifre yanlÄ±ÅŸ');
    }

    // MÃœSABAKA EKLE
    window.addMatch = async function() {
      if (!isAdmin) return alert('Yetkin yok');
      await addDoc(collection(db, 'matches'), {
        n1: n1.value,
        n2: n2.value,
        img1: img1.value,
        img2: img2.value
      });
    }

    // PUAN EKLE
    window.addScore = async function() {
      if (!isAdmin) return alert('Yetkin yok');
      await addDoc(collection(db, 'scores'), {
        name: pn.value,
        photo: pi.value,
        score: ps.value
      });
    }

    // LÄ°STELE
    onSnapshot(collection(db, 'matches'), snap => {
      musabaka.innerHTML = '';
      snap.forEach(d => {
        const m = d.data();
        musabaka.innerHTML += `
          <div class="card">
  <img src="${m.img1}" style="order:1">
  <span style="flex:1">${m.n1}</span>
  <b>VS</b>
  <span style="flex:1;text-align:right">${m.n2}</span>
  <img src="${m.img2}" style="order:5">
  ${isAdmin ? `<button onclick="deleteMatch('${d.id}')">Sil</button>` : ''}
</div>`;
      })
    });

    onSnapshot(collection(db, 'scores'), snap => {
      puan.innerHTML = '';
      snap.forEach(d => {
        const s = d.data();
        puan.innerHTML += `
          <div class="card">
  <img src="${m.img1}" style="order:1">
  <span style="flex:1">${m.n1}</span>
  <b>VS</b>
  <span style="flex:1;text-align:right">${m.n2}</span>
  <img src="${m.img2}" style="order:5">
  ${isAdmin ? `<button onclick="deleteMatch('${d.id}')">Sil</button>` : ''}
</div>`;
      })
    });

    window.deleteMatch = async id => {
      if (!isAdmin) return;
      await deleteDoc(doc(db, 'matches', id));
    }

    window.deleteScore = async id => {
      if (!isAdmin) return;
      await deleteDoc(doc(db, 'scores', id));
    }
  </script>

  <style>
  :root{
    --yellow:#f5c400;
    --dark:#111;
    --dark2:#1c1c1c;
    --card:#222;
  }

  body{
    margin:0;
    font-family:Arial, Helvetica, sans-serif;
    background:var(--dark);
    color:#fff;
  }

  header{
    display:flex;
    gap:12px;
    padding:15px 20px;
    background:var(--dark2);
    border-bottom:2px solid var(--yellow);
  }

  header button{
    background:transparent;
    color:#fff;
    border:2px solid var(--yellow);
    padding:10px 18px;
    font-weight:bold;
    cursor:pointer;
    border-radius:6px;
    transition:.2s;
  }

  header button:hover{
    background:var(--yellow);
    color:#000;
  }

  .container{
    padding:25px;
    max-width:900px;
    margin:auto;
  }

  .card{
    background:var(--card);
    padding:15px;
    margin-bottom:15px;
    border-radius:10px;
    display:flex;
    align-items:center;
    gap:15px;
    border-left:6px solid var(--yellow);
  }

  .card b{
    color:var(--yellow);
    margin:0 10px;
  }

  img{
    width:70px;
    height:70px;
    object-fit:cover;
    border-radius:8px;
    border:2px solid var(--yellow);
  }

  .card button{
    margin-left:auto;
    background:var(--yellow);
    color:#000;
    border:none;
    padding:8px 14px;
    border-radius:6px;
    font-weight:bold;
    cursor:pointer;
  }

  .card button:hover{opacity:.8}

  input{
    width:100%;
    padding:10px;
    margin-bottom:10px;
    border-radius:6px;
    border:none;
    outline:none;
  }

  h3{
    color:var(--yellow);
    margin-top:30px;
  }
</style>
</head>
<body>

<header>
  <button onclick="showPage('musabaka')">MÃœSABAKALAR</button>
  <button onclick="showPage('puan')">PUAN LÄ°STESÄ°</button>
  <button onclick="showPage('admin')">ADMÄ°N</button>
</header>

<div id="musabaka" class="container"></div>
<div id="puan" class="container" style="display:none"></div>

<div id="admin" class="container" style="display:none">
  <div id="loginBox">
    <input id="pass" type="password" placeholder="Åžifre">
    <button onclick="login()">GiriÅŸ</button>
  </div>

  <div id="panel" style="display:none">
    <h3>MÃ¼sabaka Ekle</h3>
    <input id="n1" placeholder="Sporcu 1">
    <input id="file1" type="file">
<input id="n2" placeholder="Sporcu 2">
<input id="file2" type="file">
    <button onclick="addMatch()">Ekle</button>

    <h3>Puan Ekle</h3>
    <input id="pn" placeholder="Ä°sim">
    <input id="pi" placeholder="Foto URL">
    <input id="ps" placeholder="Puan (0-1)">
    <button onclick="addScore()">Kaydet</button>
  </div>
</div>

</body>
</html>
